<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Raffle Dashboard</title>

  <!-- Inter Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

  <style>
    /* ==============================
       MASTER LAYOUT VARIABLES
       ============================== */
    :root {
      --app-width: 1600px;
      --app-height: 1020px;
      --sidebar-width: 252px;
      --content-left: 360px;
      --content-width: 1120px;
    }

    body {
      background-color: #303149;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-family: 'Inter', sans-serif;
    }

    .white-square {
      width: var(--app-width);
      height: var(--app-height);
      background-color: #FAF8F6;
      position: relative;
      border-radius: 30px;
      overflow: hidden;
    }

    /* TOP SIDEBAR */
    .top-sidebar {
      position: absolute;
      top: 0;
      left: 0;
      width: var(--sidebar-width);
      height: 200px;
      background-image: url('/static/assets/Background/Top-Sidebar.png');
      background-size: cover;
      background-repeat: no-repeat;
      border-top-left-radius: 30px;
      border-top-right-radius: 30px;
      z-index: 5;
    }

    /* TAKO */
    .tako {
      position: absolute;
      top: 60px;
      left: calc(var(--sidebar-width) / 2);
      transform: translate(-50%, -50%);
      width: 148px;
      height: 148px;
      background-image: url('/static/assets/Icons/TAKO%201.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      z-index: 25;
      pointer-events: none;
    }

    /* MAIN SIDEBAR */
    .sidebar {
      position: absolute;
      left: 0;
      bottom: 0px;
      width: var(--sidebar-width);
      height: 900px;
      background-image: url('/static/assets/Background/Sidebar.png');
      background-size: cover;
      background-repeat: no-repeat;
      border-bottom-right-radius: 30px;
      border-bottom-left-radius: 30px;
      z-index: 10;
    }

    /* RECTANGLE */
    .rectangle {
      position: absolute;
      top: 135px;
      left: 0;
      width: 165px;
      height: 48px;
      background-image: url('/static/assets/Background/Rectangle.png');
      background-size: cover;
      background-repeat: no-repeat;
      z-index: 20;
      pointer-events: none;
    }

    /* ACTIVE WHITE SQUARE */
    .square {
      position: absolute;
      left: 30px;
      width: 244px;
      height: 52px;
      background-image: url('/static/assets/Background/Square.png');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      z-index: 30;
      pointer-events: none;
      transition: top 140ms ease;
    }

/* SIDEBAR NAV */
.sidebar-nav {
  position: absolute;
  top: 140px;
  left: 55px;     /* FIX: was 0px */
  width: 244px;
  font-size: 16px;
  line-height: 58px;
  z-index: 40;
}

    .sidebar-nav a {
      display: block;
      position: relative;
      padding-left: 26px;
      color: #ffffff;
      text-decoration: none;
      font-weight: 400;
      user-select: none;
    }

    .sidebar-nav a.is-active {
      color: #6E5FFC;
      font-weight: 600;
    }

    .nav-icon {
      position: absolute;
      left: -5px;
      top: 17px;
      width: 20px;
      height: 20px;
      filter: brightness(0) invert(1);
      pointer-events: none;
    }

    .sidebar-nav a.is-active .nav-icon {
      filter: brightness(0) saturate(100%) invert(46%) sepia(82%)
              saturate(2780%) hue-rotate(222deg);
    }

    /* SEARCH BAR */
    .search-bar {
      position: absolute;
      top: 40px;
      left: var(--content-left);
      width: calc(var(--content-width) - 400px);
      display: flex;
      align-items: center;
      gap: 10px;
      background: #ffffff;
      border-radius: 14px;
      padding: 12px 16px;
      z-index: 50;
    }

    .search-bar img { width: 20px; height: 20px; }
    .search-bar input {
      border: none;
      outline: none;
      width: 100%;
      font-size: 14px;
      background: transparent;
    }

    /* TOP RIGHT ICONS */
    #themeToggle { position: absolute; top: 48px; right: 260px; width: 44px; height: 24px; }
    #settingsBtn { position: absolute; top: 48px; right: 200px; width: 24px; height: 24px; }
    #bellBtn     { position: absolute; top: 48px; right: 150px; width: 24px; height: 24px; }
    #profileBtn  { position: absolute; top: 48px; right: 100px; width: 24px; height: 24px; }

    /* ==============================
       PAGE TITLE (COMPACT)
       ============================== */
    .page-title {
      position: absolute;
      top: 100px;
      left: var(--content-left);
      font-size: 30px;
      font-weight: 700;
      color: #111;
      letter-spacing: -0.4px;
    }

    .page-subtitle {
      position: absolute;
      top: 140px;
      left: var(--content-left);
      font-size: 13px;
      font-weight: 500;
      color: #7A7D8C;
      max-width: 720px;
      line-height: 1.35;
    }

    /* ==============================
       STAT CARDS (WIDE + SHORT)
       ============================== */
    .stats-row {
      position: absolute;
      top: 170px;
      left: var(--content-left);
      width: var(--content-width);
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .stat-card {
      height: 70px;
      border-radius: 20px;
      padding: 16px 26px;
      color: #fff;
      box-shadow: 0 10px 18px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
    }

    .stat-label {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      opacity: 0.9;
      margin-bottom: 6px;
    }

    .stat-value {
      font-size: 34px;
      font-weight: 700;
      letter-spacing: -0.5px;
      line-height: 1;
    }

    .money .stat-value {
      font-size: 44px;
      letter-spacing: -0.8px;
    }

    .stat-trend {
      position: absolute;
      right: 20px;
      bottom: 14px;
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .trend-icon { font-size: 14px; }

    /* gradients matching the mock */
    .pink   { background: linear-gradient(135deg, #ff5fb7, #ff3c9e); }
    .purple { background: linear-gradient(135deg, #b06cff, #8f5bff); }
    .green  { background: linear-gradient(135deg, #00d084, #00b36b); }
    .orange { background: linear-gradient(135deg, #ffb200, #ff9800); }

        /* ==============================
   MID SECTION: PERFORMANCE + QUICK ACTIONS
   ============================== */
.mid-row {
  position: absolute;
  top: 290px;
  left: var(--content-left);
  width: var(--content-width);
  display: grid;
  grid-template-columns: 2.2fr 1fr;
  grid-template-rows: 1fr 1fr;  /* ADD THIS - forces 2 equal rows */
  gap: 22px;
}

/* keep panel look, but let stacked panels size nicely */
.panel {
  background: #ffffff;
  height: 315px;            /* CHANGED (was 315px) */
  min-height: 315px;       /* NEW: keeps your original feel */
  border-radius: 22px;
  padding: 22px 22px;
  box-shadow: 0 12px 22px rgba(0,0,0,0.10);
}

.panel-title {
  font-size: 18px;
  font-weight: 700;
  color: #111;
  margin: 0 0 6px 0;
}

.panel-subtitle {
  font-size: 13px;
  font-weight: 500;
  color: #7A7D8C;
  margin: 0 0 14px 0;
}

/* Performance chart placeholder box */
.chart-wrap {
  width: 100%;
  height: 280px;
  border-radius: 16px;
  background: #ffffff;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Quick Actions layout */
.quick-actions-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-top: 14px;
}

.quick-action {
  display: flex;
  align-items: center;
  gap: 14px;
  height: 72px;
  border-radius: 18px;
  padding: 2px 10px;
  color: #ffffff;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 10px 18px rgba(0,0,0,0.10);
  transition: filter 0.18s ease, transform 0.18s ease, box-shadow 0.18s ease;
}

.quick-action:hover {
  filter: brightness(0.92);   /* slightly darker on hover */
  transform: translateY(-1px);
  box-shadow: 0 14px 22px rgba(0,0,0,0.14);
}

.quick-action:active {
  filter: brightness(0.88);
  transform: translateY(0);
}

.qa-icon {
  width: 34px;
  height: 34px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  background: rgba(255,255,255,0.18);
  font-size: 14px;
  font-weight: 800;
}

.qa-text {
  display: flex;
  flex-direction: column;
  line-height: 1.15;
}

.qa-title {
  font-size: 14px;
  font-weight: 800;
  margin-bottom: 6px;
}

.qa-sub {
  font-size: 13px;
  font-weight: 600;
  opacity: 0.95;
}

/* System Status rows */
.system-status .status-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  border-radius: 12px;
  background: #F9FAFB;
  font-size: 14px;
  font-weight: 600;
  margin-top: 12px;
}

.system-status .ok {
  color: #16A34A;
  font-weight: 700;
}

.system-status .muted {
  background: #F5F3FF;
  color: #6D28D9;
}

        /* ==============================
   CHART TOOLTIP (WHITE CARD) + VLINE
   ============================== */
.chart-vline{
  position:absolute;
  top:12px;
  bottom:12px;
  width:2px;
  background:#E5E7EB;
  border-radius:2px;
  display:none;
  pointer-events:none;
  z-index:90;
}

.chart-tooltip{
  position:absolute;
  background:#ffffff;
  color:#111;
  padding:12px 14px;
  border-radius:14px;
  font-size:13px;
  font-weight:600;
  pointer-events:none;
  display:none;
  box-shadow:0 12px 24px rgba(0,0,0,0.18);
  z-index:100;
  min-width: 190px;
}

.tt-month{
  font-size:14px;
  font-weight:800;
  margin-bottom:8px;
}

.tt-row{
  display:flex;
  justify-content:space-between;
  gap:10px;
  font-weight:700;
  margin-top:6px;
}

.tt-green{ color:#2FB56A; }
.tt-red{ color:#E0453B; }

/* ==============================
   TOP PARTICIPANTS (STYLES)
   ============================== */
.participants-list{
  display:flex;
  flex-direction:column;
  gap:18px;
  margin-top: 10px;
}

.participant-row{
  display:grid;
  grid-template-columns: 34px 46px 1fr auto;
  align-items:center;
  column-gap:14px;
}

.rank-icon{
  font-size: 22px;
  line-height: 1;
  display:flex;
  align-items:center;
  justify-content:center;
}

.avatar{
  width:44px;
  height:44px;
  border-radius: 999px;
  display:grid;
  place-items:center;
  font-weight:800;
  color:#fff;
  background: linear-gradient(135deg, #b06cff, #ff5fb7);
}

.p-info{
  display:flex;
  flex-direction:column;
  line-height:1.15;
}

.p-user{
  color:#6E5FFC;
  font-weight:700;
  text-decoration:none;
  font-size: 14px;
}

.p-user:hover{
  text-decoration:underline;
}

.p-sub{
  margin-top:4px;
  color:#7A7D8C;
  font-weight:600;
  font-size: 12px;
}

.p-amt{
  font-weight:800;
  color:#111;
  font-size: 14px;
}


    /* ==============================
       ACCESS DENIED MODAL
       ============================== */
    .access-denied-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(8px);
      z-index: 999999;
      animation: fadeIn 0.2s ease;
    }

    .access-denied-overlay.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .access-denied-modal {
      background: white;
      border-radius: 24px;
      padding: 0;
      width: 440px;
      max-width: 90vw;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.3s ease;
      overflow: hidden;
    }

    .access-modal-header {
      background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
      padding: 32px;
      text-align: center;
      position: relative;
    }

    .access-modal-icon {
      width: 72px;
      height: 72px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      font-size: 36px;
      animation: shake 0.5s ease;
    }

    @keyframes shake {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-10deg); }
      75% { transform: rotate(10deg); }
    }

    .access-modal-title {
      font-size: 26px;
      font-weight: 800;
      color: white;
      margin: 0 0 8px 0;
      letter-spacing: -0.5px;
    }

    .access-modal-subtitle {
      font-size: 14px;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.9);
      margin: 0;
    }

    .access-modal-body {
      padding: 32px;
      text-align: center;
    }

    .access-modal-message {
      font-size: 16px;
      font-weight: 500;
      color: #374151;
      line-height: 1.6;
      margin: 0 0 24px 0;
    }

    .access-modal-actions {
      display: flex;
      gap: 12px;
    }

    .access-modal-btn {
      flex: 1;
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 700;
      font-family: 'Inter', sans-serif;
      cursor: pointer;
      transition: all 0.2s;
    }

    .access-modal-btn-primary {
      background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
      color: white;
    }

    .access-modal-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4);
    }

    .access-modal-btn-primary:active {
      transform: translateY(0);
    }

    </style>
</head>

<body>
  <div class="white-square">
    <div class="top-sidebar"></div>
    <div class="tako"></div>
    <div class="sidebar"></div>
    <div class="rectangle"></div>
    <div class="square" id="activeSquare"></div>

    <!-- SEARCH -->
    <div class="search-bar">
      <img src="/static/assets/Icons/Normal.png">
      <input placeholder="Search here...">
    </div>

    <!-- ICONS -->
    <div id="themeToggle"><img src="/static/assets/Icons/OFF.png"></div>
    <div id="settingsBtn"><img src="/static/assets/Icons/Notifications%20Copy.png"></div>
    <div id="bellBtn"><img src="/static/assets/Icons/bell.png"></div>
    <div id="profileBtn"><img src="/static/assets/Icons/images-removebg-preview%201.png"></div>

    <!-- CONTENT -->
    <div class="page-title">Overview</div>
    <div class="page-subtitle">Welcome back! Here's what's happening with your raffles.</div>

<!-- STAT CARDS -->
<div class="stats-row">
  <div class="stat-card pink">
    <div class="stat-label">RAFFLES THIS MONTH</div>
    <div class="stat-value" id="totalRaffles">-</div>
  </div>

  <div class="stat-card purple">
    <div class="stat-label">COMPLETED THIS MONTH</div>
    <div class="stat-value" id="completedRaffles">-</div>
  </div>

  <div class="stat-card green">
    <div class="stat-label">CANCELLED THIS MONTH</div>
    <div class="stat-value" id="cancelledRaffles">-</div>
  </div>

  <div class="stat-card orange money">
    <div class="stat-label">GIVVY FUNDS THIS MONTH</div>
    <div class="stat-value" id="givvyFunds">$0</div>
  </div>
</div>

        <!-- MID SECTION: Raffle Performance + Quick Actions -->
<div class="mid-row">

  <!-- Row 1 / Col 1: Raffle Performance -->
  <div class="panel">
    <div class="panel-title">Raffle Performance</div>
    <div class="panel-subtitle">Last 6 months activity</div>

    <div class="chart-wrap" id="chartArea" style="position: relative;">
      <svg width="100%" height="100%" viewBox="0 0 920 360" preserveAspectRatio="xMidYMid meet">

        <!-- CHART CONTENT (moved up slightly) -->
        <g transform="translate(0,-50)">

          <!-- grid -->
          <g stroke="#E8EAF2" stroke-width="1">
            <line x1="70" y1="40" x2="890" y2="40" />
            <line x1="70" y1="110" x2="890" y2="110" />
            <line x1="70" y1="180" x2="890" y2="180" />
            <line x1="70" y1="250" x2="890" y2="250" />
            <line x1="70" y1="320" x2="890" y2="320" />
            <line x1="70" y1="40" x2="70" y2="320" />
          </g>

          <!-- axes labels -->
          <g fill="#6B7280" font-family="Inter, sans-serif" font-size="14">
            <text x="60" y="324" text-anchor="end">0</text>
            <text x="60" y="254" text-anchor="end">5</text>
            <text x="60" y="184" text-anchor="end">10</text>
            <text x="60" y="114" text-anchor="end">15</text>
            <text x="60" y="44"  text-anchor="end">20</text>

            <text x="120" y="348" text-anchor="middle">Jan</text>
            <text x="260" y="348" text-anchor="middle">Feb</text>
            <text x="400" y="348" text-anchor="middle">Mar</text>
            <text x="540" y="348" text-anchor="middle">Apr</text>
            <text x="680" y="348" text-anchor="middle">May</text>
            <text x="820" y="348" text-anchor="middle">Jun</text>
          </g>

          <!-- Hover groups -->
              <!-- Hover groups -->
          <g class="data-point" data-month="" data-completed="0" data-cancelled="0" data-cx="120" style="cursor:pointer; pointer-events:all;">
            <circle cx="120" cy="200" r="60" fill="transparent"></circle>
          </g>

          <g class="data-point" data-month="" data-completed="0" data-cancelled="0" data-cx="260" style="cursor:pointer; pointer-events:all;">
            <circle cx="260" cy="200" r="60" fill="transparent"></circle>
          </g>

          <g class="data-point" data-month="" data-completed="0" data-cancelled="0" data-cx="400" style="cursor:pointer; pointer-events:all;">
            <circle cx="400" cy="200" r="60" fill="transparent"></circle>
          </g>

          <g class="data-point" data-month="" data-completed="0" data-cancelled="0" data-cx="540" style="cursor:pointer; pointer-events:all;">
            <circle cx="540" cy="200" r="60" fill="transparent"></circle>
          </g>

          <g class="data-point" data-month="" data-completed="0" data-cancelled="0" data-cx="680" style="cursor:pointer; pointer-events:all;">
            <circle cx="680" cy="200" r="60" fill="transparent"></circle>
          </g>

          <g class="data-point" data-month="" data-completed="0" data-cancelled="0" data-cx="820" style="cursor:pointer; pointer-events:all;">
            <circle cx="820" cy="200" r="60" fill="transparent"></circle>
          </g>

        </g><!-- closes translate group -->

        <!-- Legend OUTSIDE the moved-up group so it stays in place -->
        <g font-family="Inter, sans-serif" font-size="14" font-weight="600">
          <circle cx="390" cy="332" r="4" fill="#2FB56A"></circle>
          <text x="400" y="336" fill="#2FB56A">Completed</text>

          <circle cx="520" cy="332" r="4" fill="#E0453B"></circle>
          <text x="532" y="336" fill="#E0453B">Cancelled</text>
        </g>

      </svg>

      <div class="chart-vline" id="chartVline"></div>

         <div class="chart-tooltip" id="chartTooltip">
        <div class="tt-month" id="ttMonth">-</div>
        <div class="tt-row tt-green">Completed : <strong id="ttCompleted">0</strong></div>
        <div class="tt-row tt-red">Cancelled : <strong id="ttCancelled">0</strong></div>
      </div>
    </div>
  </div>

  <!-- Row 1 / Col 2: Top Participants -->
  <div class="panel">
    <div class="panel-title">Top Participants</div>
    <div class="panel-subtitle">Most active raffle participants</div>

<div class="participants-list" id="participantsList">
  <div class="participant-row">
    <div class="rank-icon">üèÜ</div>
    <div class="avatar">-</div>
    <div class="p-info">
      <a class="p-user">Loading...</a>
      <div class="p-sub">-</div>
    </div>
    <div class="p-amt">-</div>
  </div>

  <div class="participant-row">
    <div class="rank-icon">ü•à</div>
    <div class="avatar">-</div>
    <div class="p-info">
      <a class="p-user">Loading...</a>
      <div class="p-sub">-</div>
    </div>
    <div class="p-amt">-</div>
  </div>

  <div class="participant-row">
    <div class="rank-icon">ü•â</div>
    <div class="avatar">-</div>
    <div class="p-info">
      <a class="p-user">Loading...</a>
      <div class="p-sub">-</div>
    </div>
    <div class="p-amt">-</div>
  </div>
</div>
 </div>

  <!-- Row 2 / Col 1: Quick Actions -->
  <div class="panel">
    <div class="panel-title">Quick Actions</div>
    <div class="panel-subtitle">Shortcuts to common tasks</div>

    <div class="quick-actions-list">
<div class="quick-action purple" onclick="createNewRaffle()">
  <div class="qa-icon">+</div>
  <div class="qa-text">
    <div class="qa-title">Create New Raffle</div>
    <div class="qa-sub">Start a new raffle event</div>
  </div>
</div>

<div class="quick-action green" onclick="exportRaffleData(event)">
  <div class="qa-icon">‚¨á</div>
  <div class="qa-text">
    <div class="qa-title">Export Data</div>
    <div class="qa-sub">Download raffle reports</div>
  </div>
</div>

<div class="quick-action orange" onclick="openProfitCalc()">
  <div class="qa-icon">üí∞</div>
  <div class="qa-text">
    <div class="qa-title">Profit Calculator</div>
    <div class="qa-sub">Calculate net earnings</div>
  </div>
</div>
    </div>
  </div>

<!-- Row 2 / Col 2: System Status -->
<div class="panel system-status">
  <div class="panel-title">System Status</div>

  <div class="status-row">
    <span>‚úâÔ∏è Gmail API</span>
    <span id="gmailStatus" class="ok">Checking...</span>
  </div>

  <div class="status-row">
    <span>üìà Bot Status</span>
    <span id="botStatus" class="ok">Checking...</span>
  </div>

  <div class="status-row muted">
    <span>üïí Last Updated</span>
    <span id="lastUpdated">-</span>
  </div>
</div>

<!-- PROFIT CALCULATOR MODAL -->
<div id="profitCalcModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:9999; display:none;">
  <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; border4-radius:24px; padding:32px; width:480px; box-shadow:0 20px 60px rgba(0,0,0,0.3);">

 <div style="margin-bottom:20px;">
      <label style="display:block; font-size:13px; font-weight:700; color:#64748B; margin-bottom:8px; text-transform:uppercase; letter-spacing:0.5px;">Cost of Item ($)</label>
      <input type="number" id="calcItemCost" placeholder="e.g., 5000" style="width:100%; padding:9px 9px; border:2px solid #E2E8F0; border-radius:12px; font-size:16px; font-weight:600;" oninput="calculateProfit()">
    </div>

    <div style="margin-bottom:20px;">
      <label style="display:block; font-size:13px; font-weight:700; color:#64748B; margin-bottom:8px; text-transform:uppercase; letter-spacing:0.5px;">Total Spots</label>
      <input type="number" id="calcSpots" placeholder="e.g., 100" style="width:100%; padding:9px 9px; border:2px solid #E2E8F0; border-radius:12px; font-size:16px; font-weight:600;" oninput="calculateProfit()">
    </div>

    <div style="margin-bottom:20px;">
      <label style="display:block; font-size:13px; font-weight:700; color:#64748B; margin-bottom:8px; text-transform:uppercase; letter-spacing:0.5px;">Price Per Spot ($)</label>
      <input type="number" id="calcPrice" placeholder="e.g., 25" style="width:100%; padding:9px 9px; border:2px solid #E2E8F0; border-radius:12px; font-size:16px; font-weight:600;" oninput="calculateProfit()">
    </div>

    <div style="margin-bottom:20px;">
      <label style="display:block; font-size:13px; font-weight:700; color:#64748B; margin-bottom:8px; text-transform:uppercase; letter-spacing:0.5px;">Escrow to Winner ($)</label>
      <input type="number" id="calcEscrow" placeholder="e.g., 2500" style="width:100%; padding:9px 9px; border:2px solid #E2E8F0; border-radius:12px; font-size:16px; font-weight:600;" oninput="calculateProfit()">
    </div>

    <div style="margin-bottom:20px;">
      <label style="display:block; font-size:13px; font-weight:700; color:#64748B; margin-bottom:8px; text-transform:uppercase; letter-spacing:0.5px;">Shipping Cost ($)</label>
      <input type="number" id="calcShipping" placeholder="e.g., 50" style="width:100%; padding:9px 9px; border:2px solid #E2E8F0; border-radius:12px; font-size:16px; font-weight:600;" oninput="calculateProfit()">
    </div>

 <div style="background:linear-gradient(135deg, #F0FDF4, #DCFCE7); border-radius:16px; padding:20px; margin-top:28px;">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-size:14px; font-weight:600; color:#166534;">Gross Revenue</span>
        <span id="calcGross" style="font-size:18px; font-weight:800; color:#166534;">$0</span>
      </div>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-size:14px; font-weight:600; color:#B91C1C;">Cost of Item</span>
        <span id="calcItemCostDisplay" style="font-size:18px; font-weight:800; color:#B91C1C;">-$0</span>
      </div>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-size:14px; font-weight:600; color:#B91C1C;">Givvy Fee</span>
        <span style="font-size:18px; font-weight:800; color:#B91C1C;">-$10</span>
      </div>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-size:14px; font-weight:600; color:#B91C1C;">Escrow Paid</span>
        <span id="calcEscrowPaid" style="font-size:18px; font-weight:800; color:#B91C1C;">-$0</span>
      </div>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-size:14px; font-weight:600; color:#B91C1C;">Shipping Cost</span>
        <span id="calcShippingCost" style="font-size:18px; font-weight:800; color:#B91C1C;">-$0</span>
      </div>

      <div style="height:2px; background:#BBF7D0; margin:16px 0;"></div>

      <div style="display:flex; justify-content:space-between; align-items:center;">
        <span style="font-size:16px; font-weight:800; color:#15803D;">NET PROFIT</span>
        <span id="calcProfit" style="font-size:28px; font-weight:800; color:#15803D; letter-spacing:-0.5px;">$0</span>
      </div>
    </div>

  </div>
</div>

</div> <!-- closes .mid-row -->

<!-- NAV -->
<nav class="sidebar-nav" id="sidebarNav">
  <a class="nav-item is-active" href="/dashboard"><img class="nav-icon" src="/static/assets/Icons/Heart-Rate.png" alt="">Dashboard</a>
  <a class="nav-item" href="/active-raffle"><img class="nav-icon" src="/static/assets/Icons/Graph%20Copy.png" alt="">Active Raffle</a>
  <a class="nav-item" href="/raffle-history"><img class="nav-icon" src="/static/assets/Icons/Graph.png" alt="">Raffle History</a>
  <a class="nav-item" href="/activity-log"><img class="nav-icon" src="/static/assets/Icons/Graph%20Copy%204.png" alt="">Activity Log</a>
  <a class="nav-item" href="/profile"><img class="nav-icon" src="/static/assets/Icons/icons8-user-30%201.png" alt="">Profile</a>
  <a class="nav-item" href="#"><img class="nav-icon" src="/static/assets/Icons/discord_white_logo%201.png" alt="">Discord</a>
  <a class="nav-item" href="#"><img class="nav-icon" src="/static/assets/Icons/Graph%20Copy%204.png" alt="">Donate</a>
  <a class="nav-item" href="/admin"><img class="nav-icon" src="/static/assets/Icons/Graph%20Copy%204.png" alt="">Admin</a>
  <a class="nav-item" href="/user-management"><img class="nav-icon" src="/static/assets/Icons/icons8-user-30%201.png" alt="">User Management</a>
</nav>

<script>
  // Sidebar Admin Control - Intercept admin links for non-admin users
  (function() {
    const sidebarNav = document.getElementById('sidebarNav');
    if (!sidebarNav) return;
    
    // Find admin links
    const allLinks = sidebarNav.querySelectorAll('.nav-item');
    allLinks.forEach(link => {
      const href = link.getAttribute('href');
      if (href === '/admin' || href === '/user-management') {
        // Add click handler that runs BEFORE navigation
        link.addEventListener('click', function(e) {
          if (!window.adminCheckComplete) {
            e.preventDefault();
            e.stopPropagation();
            showAccessDenied();
          }
        }, true);
      }
    });
    
    // Check if user is admin (async)
    (async function() {
      try {
        const response = await fetch('/api/auth/current-user');
        if (!response.ok) {
          console.log('üîí Admin check: endpoint returned', response.status);
          return;
        }
        
        // Check if response is JSON
        const contentType = response.headers.get('content-type');
        if (!contentType || !contentType.includes('application/json')) {
          console.log('üîí Admin check: non-JSON response, assuming non-admin');
          return;
        }
        
        const data = await response.json();
        if (data.data?.isAdmin === true) {
          window.adminCheckComplete = true;
          console.log('‚úÖ Admin access granted');
        } else {
          console.log('üîí Admin links blocked for non-admin user');
        }
      } catch (error) {
        console.log('üîí Admin check failed, assuming non-admin');
      }
    })();
  })();
</script>

  <script>
    (function () {
      const nav = document.getElementById("sidebarNav");
      const square = document.getElementById("activeSquare");
      const active = nav.querySelector(".is-active");
      if (!active) return;

      const navRect = nav.getBoundingClientRect();
      const itemRect = active.getBoundingClientRect();
      square.style.top = (itemRect.top - navRect.top + 140) + "px";
    })();

    // ===== Chart hover tooltip (white card + vertical line) =====
    (function () {
      const chartArea = document.getElementById("chartArea");
      const tip = document.getElementById("chartTooltip");
      const vline = document.getElementById("chartVline");
      const ttMonth = document.getElementById("ttMonth");
      const ttCompleted = document.getElementById("ttCompleted");
      const ttCancelled = document.getElementById("ttCancelled");
      if (!chartArea || !tip || !vline) return;

      const points = chartArea.querySelectorAll(".data-point");

      function showForPoint(g) {
        const month = g.getAttribute("data-month") || "";
        const completed = g.getAttribute("data-completed") || "0";
        const cancelled = g.getAttribute("data-cancelled") || "0";
        const cx = Number(g.getAttribute("data-cx") || 0);

        ttMonth.textContent = month;
        ttCompleted.textContent = completed;
        ttCancelled.textContent = cancelled;

        const rect = chartArea.getBoundingClientRect();

        // viewBox width is 920 -> convert cx to pixels
        const xPx = (cx / 920) * rect.width;

        // vertical line
        const clampedX = Math.max(10, Math.min(xPx, rect.width - 10));
        vline.style.left = clampedX + "px";
        vline.style.display = "block";

        // tooltip
        tip.style.display = "block";

        const pad = 14;
        const tipW = tip.offsetWidth || 190;
        const tipH = tip.offsetHeight || 110;

        let left = clampedX + 18;
        let top = 90; // stable like screenshot

        const maxLeft = rect.width - tipW - pad;
        const maxTop = rect.height - tipH - pad;

        left = Math.max(pad, Math.min(left, maxLeft));
        top = Math.max(pad, Math.min(top, maxTop));

        tip.style.left = left + "px";
        tip.style.top = top + "px";
      }

      function hide() {
        tip.style.display = "none";
        vline.style.display = "none";
      }

      points.forEach((g) => {
        g.addEventListener("mouseenter", () => showForPoint(g));
        g.addEventListener("mousemove", () => showForPoint(g));
        g.addEventListener("mouseleave", hide);
      });

      chartArea.addEventListener("mouseleave", hide);
    })();

    // ‚úÖ ADD: replay chart line animation on every load (even if cached)
    (function () {
      const lines = document.querySelectorAll('.line-anim');
      lines.forEach((line) => {
        line.style.animation = 'none';
        line.getBoundingClientRect(); // force reflow
        line.style.animation = '';
      });
    })();

  const settingsBtn = document.getElementById("settingsBtn");
  if (settingsBtn) {
    settingsBtn.style.cursor = "pointer";
    settingsBtn.addEventListener("click", () => {
      window.location.href = "/settings";
    });
  }

        // ===== UPDATE CHART WITH REAL DATA =====
(async function updateChart() {
  try {
    const historyRes = await fetch('/api/raffle/history');
    const historyData = await historyRes.json();
    const history = historyData.data || [];

    // Group by month
    const monthCounts = {};
    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

    history.forEach(raffle => {
      const date = new Date(raffle.date || raffle.created_at);
      const monthName = months[date.getMonth()];

      if (!monthCounts[monthName]) {
        monthCounts[monthName] = { completed: 0, cancelled: 0 };
      }

      if (raffle.status === 'completed') monthCounts[monthName].completed++;
      if (raffle.status === 'cancelled') monthCounts[monthName].cancelled++;
    });

    // Get last 6 months
    const now = new Date();
    const last6Months = [];
    for (let i = 5; i >= 0; i--) {
      const d = new Date(now.getFullYear(), now.getMonth() - i, 1);
      last6Months.push(months[d.getMonth()]);
    }

    // Calculate max value for Y-axis scaling
    let maxValue = 0;
    last6Months.forEach(monthName => {
      const data = monthCounts[monthName] || { completed: 0, cancelled: 0 };
      maxValue = Math.max(maxValue, data.completed, data.cancelled);
    });

    // Round up to nice scale (minimum 20)
    const niceMax = Math.max(20, Math.ceil(maxValue / 5) * 5);
    const step = niceMax / 4;

    // Update Y-axis labels
    const yLabels = document.querySelectorAll('g[fill="#6B7280"] text[text-anchor="end"]');
    if (yLabels.length >= 5) {
      yLabels[0].textContent = niceMax;
      yLabels[1].textContent = Math.round(step * 3);
      yLabels[2].textContent = Math.round(step * 2);
      yLabels[3].textContent = Math.round(step);
      yLabels[4].textContent = 0;
    }

    // Update month labels
    const xLabels = document.querySelectorAll('g[fill="#6B7280"] text[text-anchor="middle"]');
    last6Months.forEach((monthName, i) => {
      if (xLabels[i]) {
        xLabels[i].textContent = monthName;
      }
    });

    // X positions for each month
    const xPositions = [120, 260, 400, 540, 680, 820];

    // Function to convert value to Y coordinate (inverted: high value = low Y)
    const valueToY = (value) => {
      const chartBottom = 320;
      const chartTop = 40;
      const chartHeight = chartBottom - chartTop;
      const ratio = value / niceMax;
      return chartBottom - (ratio * chartHeight);
    };

    // Build path data for lines
    const completedPoints = [];
    const cancelledPoints = [];

    last6Months.forEach((monthName, i) => {
      const data = monthCounts[monthName] || { completed: 0, cancelled: 0 };
      const x = xPositions[i];
      const yCompleted = valueToY(data.completed);
      const yCancelled = valueToY(data.cancelled);

      completedPoints.push({ x, y: yCompleted, value: data.completed });
      cancelledPoints.push({ x, y: yCancelled, value: data.cancelled });
    });

    // Find the SVG's <g transform="translate(0,-50)"> element
    const chartG = document.querySelector('#chartArea g[transform="translate(0,-50)"]');
    if (!chartG) return;

    // Remove old dynamic paths/circles if they exist
    chartG.querySelectorAll('.dynamic-line, .dynamic-dot').forEach(el => el.remove());

    // Draw completed line (green)
    if (completedPoints.some(p => p.value > 0)) {
      const completedPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      const pathD = completedPoints.map((p, i) =>
        `${i === 0 ? 'M' : 'L'}${p.x},${p.y}`
      ).join(' ');
      completedPath.setAttribute('d', pathD);
      completedPath.setAttribute('fill', 'none');
      completedPath.setAttribute('stroke', '#2FB56A');
      completedPath.setAttribute('stroke-width', '4');
      completedPath.setAttribute('stroke-linecap', 'round');
      completedPath.classList.add('dynamic-line');
      chartG.appendChild(completedPath);
    }

    // Draw cancelled line (red)
    if (cancelledPoints.some(p => p.value > 0)) {
      const cancelledPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      const pathD = cancelledPoints.map((p, i) =>
        `${i === 0 ? 'M' : 'L'}${p.x},${p.y}`
      ).join(' ');
      cancelledPath.setAttribute('d', pathD);
      cancelledPath.setAttribute('fill', 'none');
      cancelledPath.setAttribute('stroke', '#E0453B');
      cancelledPath.setAttribute('stroke-width', '4');
      cancelledPath.setAttribute('stroke-linecap', 'round');
      cancelledPath.classList.add('dynamic-line');
      chartG.appendChild(cancelledPath);
    }

    // Draw dots
    completedPoints.forEach((p, i) => {
      if (p.value > 0) {
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', p.x);
        circle.setAttribute('cy', p.y);
        circle.setAttribute('r', '7');
        circle.setAttribute('fill', '#2FB56A');
        circle.classList.add('dynamic-dot');
        chartG.appendChild(circle);
      }
    });

    cancelledPoints.forEach((p, i) => {
      if (p.value > 0) {
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', p.x);
        circle.setAttribute('cy', p.y);
        circle.setAttribute('r', '7');
        circle.setAttribute('fill', '#E0453B');
        circle.classList.add('dynamic-dot');
        chartG.appendChild(circle);
      }
    });

    // Update data-point attributes for tooltips
    const dataPoints = document.querySelectorAll('.data-point');
    dataPoints.forEach((point, i) => {
      if (last6Months[i]) {
        const monthName = last6Months[i];
        const data = monthCounts[monthName] || { completed: 0, cancelled: 0 };

        point.setAttribute('data-month', monthName);
        point.setAttribute('data-completed', data.completed);
        point.setAttribute('data-cancelled', data.cancelled);
      }
    });

  } catch (err) {
    console.error('Chart update error:', err);
  }
})();



// ===== FETCH REAL DASHBOARD DATA =====
(async function loadDashboardData() {
  try {
const historyRes = await fetch('/api/raffle/history');
const historyData = await historyRes.json();
const history = historyData.data || [];

// Get current month/year
const now = new Date();
const currentMonth = now.getMonth();
const currentYear = now.getFullYear();

// Filter to only this month
const thisMonth = history.filter(raffle => {
  const raffleDate = new Date(raffle.date || raffle.created_at);
  return raffleDate.getMonth() === currentMonth && raffleDate.getFullYear() === currentYear;
});

const total = thisMonth.length;
const completed = thisMonth.filter(r => r.status === 'completed').length;
const cancelled = thisMonth.filter(r => r.status === 'cancelled').length;

    const activeRes = await fetch('/api/active-raffle');
    const activeData = await activeRes.json();
    const active = activeData.raffle_name ? 1 : 0;

const givvyFunds = completed * 10;

document.getElementById('totalRaffles').textContent = total;
document.getElementById('completedRaffles').textContent = completed;
document.getElementById('cancelledRaffles').textContent = cancelled;
document.getElementById('givvyFunds').textContent = '$' + givvyFunds.toLocaleString();

    const participants = {};
    history.forEach(raffle => {
      if (raffle.status === 'completed' && raffle.participants) {
        raffle.participants.forEach(p => {
          if (!participants[p.redditUser]) {
            participants[p.redditUser] = { count: 0, total: 0 };
          }
          participants[p.redditUser].count++;
          participants[p.redditUser].total += (p.amountPaid || 0);
        });
      }
    });

    const topUsers = Object.entries(participants)
      .map(([user, data]) => ({ user, ...data }))
      .sort((a, b) => b.total - a.total)
      .slice(0, 3);

    const icons = ['üèÜ', 'ü•à', 'ü•â'];
    const list = document.getElementById('participantsList');

    if (topUsers.length > 0) {
      list.innerHTML = topUsers.map((p, i) => {
        const initial = p.user.charAt(0).toUpperCase();
        return `
          <div class="participant-row">
            <div class="rank-icon">${icons[i]}</div>
            <div class="avatar">${initial}</div>
            <div class="p-info">
              <a class="p-user" href="https://reddit.com/u/${p.user}" target="_blank">u/${p.user}</a>
              <div class="p-sub">${p.count} raffles joined</div>
            </div>
            <div class="p-amt">$${p.total.toFixed(0)}</div>
          </div>
        `;
      }).join('');
    }
  } catch (err) {
    console.error('Dashboard load error:', err);
  }
})();

        // ===== FETCH SYSTEM STATUS =====
(async function loadSystemStatus() {
  try {
    const statusRes = await fetch('/api/system/status');
    const statusData = await statusRes.json();
    const status = statusData.data;

    // Update Gmail status
    const gmailEl = document.getElementById('gmailStatus');
    if (status.gmailConnected) {
      gmailEl.textContent = 'Connected';
      gmailEl.className = 'ok';
    } else {
      gmailEl.textContent = 'Disconnected';
      gmailEl.className = '';
      gmailEl.style.color = '#E0453B';
      gmailEl.style.fontWeight = '700';
    }

    // Update Bot status
    const botEl = document.getElementById('botStatus');
    if (status.botOnline) {
      botEl.textContent = 'Online';
      botEl.className = 'ok';
    } else {
      botEl.textContent = 'Offline';
      botEl.className = '';
      botEl.style.color = '#E0453B';
      botEl.style.fontWeight = '700';
    }

    // Update last updated
    document.getElementById('lastUpdated').textContent = status.lastUpdated;

    // Refresh every 30 seconds
    setTimeout(loadSystemStatus, 30000);
  } catch (err) {
    console.error('System status error:', err);
  }
})();

// ===== PROFIT CALCULATOR =====
function openProfitCalc() {
  document.getElementById('profitCalcModal').style.display = 'block';
  calculateProfit();
}

function closeProfitCalc() {
  document.getElementById('profitCalcModal').style.display = 'none';
}

function calculateProfit() {
  const itemCost = parseFloat(document.getElementById('calcItemCost').value) || 0;
  const spots = parseFloat(document.getElementById('calcSpots').value) || 0;
  const price = parseFloat(document.getElementById('calcPrice').value) || 0;
  const escrow = parseFloat(document.getElementById('calcEscrow').value) || 0;
  const shipping = parseFloat(document.getElementById('calcShipping').value) || 0;

  const gross = spots * price;
  const givvyFee = 10; // $10 per raffle
  const profit = gross - itemCost - givvyFee - escrow - shipping;

  document.getElementById('calcGross').textContent = '$' + gross.toLocaleString();
  document.getElementById('calcItemCostDisplay').textContent = '-$' + itemCost.toLocaleString();
  document.getElementById('calcEscrowPaid').textContent = '-$' + escrow.toLocaleString();
  document.getElementById('calcShippingCost').textContent = '-$' + shipping.toLocaleString();
  document.getElementById('calcProfit').textContent = '$' + profit.toLocaleString();

  // Change profit color if negative
  const profitEl = document.getElementById('calcProfit');
  if (profit < 0) {
    profitEl.style.color = '#B91C1C';
  } else {
    profitEl.style.color = '#15803D';
  }
}

// Close modal on outside click
document.addEventListener('click', (e) => {
  const modal = document.getElementById('profitCalcModal');
  if (e.target === modal) {
    closeProfitCalc();
  }
});

// ===== EXPORT RAFFLE DATA =====
async function exportRaffleData(event) {
  try {
    // Fetch all raffle history
    const historyRes = await fetch('/api/raffle/history');
    const historyData = await historyRes.json();
    const history = historyData.data || [];

    if (history.length === 0) {
      alert('No raffle data to export');
      return;
    }

    // Build CSV content
    let csv = 'Raffle ID,Date,Status,Reddit Link,Total Spots,Cost Per Spot,Participant,Spots Requested,Amount Owed,Amount Paid,Winner,Winner Spot\n';

    history.forEach(raffle => {
      const raffleId = raffle.id || '';
      const date = raffle.date || '';
      const status = raffle.status || '';
      const redditLink = raffle.redditLink || '';
      const totalSpots = raffle.totalSpots || '';
      const costPerSpot = raffle.costPerSpot || '';
      const winner = raffle.winner ? raffle.winner.username : '';
      const winnerSpot = raffle.winner ? raffle.winner.spot : '';

      // If no participants, add one row for the raffle
      if (!raffle.participants || raffle.participants.length === 0) {
        csv += `"${raffleId}","${date}","${status}","${redditLink}","${totalSpots}","${costPerSpot}","","","","","${winner}","${winnerSpot}"\n`;
      } else {
        // Add a row for each participant
        raffle.participants.forEach(p => {
          const user = (p.redditUser || '').replace(/"/g, '""');
const spots = p.spots || 0;
const owed = p.owed || 0;
const paid = p.paid ? p.owed : 0; // If paid=true, show owed amount, else 0

          csv += `"${raffleId}","${date}","${status}","${redditLink}","${totalSpots}","${costPerSpot}","${user}","${spots}","${owed}","${paid}","${winner}","${winnerSpot}"\n`;
        });
      }
    });

    // Create download
    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement('a');
    const url = URL.createObjectURL(blob);
    const timestamp = new Date().toISOString().split('T')[0];

    link.setAttribute('href', url);
    link.setAttribute('download', `raffle-history-${timestamp}.csv`);
    link.style.visibility = 'hidden';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    // Success feedback
    const btn = event.target.closest('.quick-action');
    const originalText = btn.querySelector('.qa-title').textContent;
    btn.querySelector('.qa-title').textContent = '‚úì Downloaded!';
    setTimeout(() => {
      btn.querySelector('.qa-title').textContent = originalText;
    }, 2000);

  } catch (err) {
    console.error('Export error:', err);
    alert('Export failed. Check console for details.');
  }
}
// ===== CREATE NEW RAFFLE =====
function createNewRaffle() {
  window.location.href = '/active-raffle?setup=open';
}

// ===== ACCESS DENIED MODAL =====
function showAccessDenied() {
  const overlay = document.getElementById('accessDeniedOverlay');
  if (!overlay) {
    // Fallback if modal HTML not found
    alert('Access Denied\n\nAdmins only');
    return;
  }
  overlay.classList.add('show');
  document.body.style.overflow = 'hidden';
}

function closeAccessDenied(event) {
  if (!event || event.target === document.getElementById('accessDeniedOverlay')) {
    const overlay = document.getElementById('accessDeniedOverlay');
    if (overlay) {
      overlay.classList.remove('show');
      document.body.style.overflow = '';
    }
  }
}

// Close on Escape key
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    const overlay = document.getElementById('accessDeniedOverlay');
    if (overlay && overlay.classList.contains('show')) {
      closeAccessDenied({ target: overlay });
    }
  }
});

  </script>

  <!-- ACCESS DENIED MODAL -->
  <div class="access-denied-overlay" id="accessDeniedOverlay" onclick="closeAccessDenied(event)">
    <div class="access-denied-modal" onclick="event.stopPropagation()">
      <div class="access-modal-header">
        <div class="access-modal-icon">üîí</div>
        <h2 class="access-modal-title">Access Denied</h2>
        <p class="access-modal-subtitle">Admin privileges required</p>
      </div>
      <div class="access-modal-body">
        <p class="access-modal-message">
          You don't have permission to access this page. This area is restricted to administrators only.
        </p>
        <div class="access-modal-actions">
          <button class="access-modal-btn access-modal-btn-primary" onclick="closeAccessDenied()">
            Got it
          </button>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
